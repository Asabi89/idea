<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Admin Dashboard - ProjectHub</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/animate.css/4.1.1/animate.min.css">
    <link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0/css/all.min.css" rel="stylesheet">
    <!-- Import script.js to get projects data -->
    <script src="script.js"></script>
    <style>
        /* Custom Styles */
        body {
            background: linear-gradient(135deg, #0f172a 0%, #581c87 50%, #0f172a 100%);
            min-height: 100vh;
        }

        .stat-card {
            background: rgba(255, 255, 255, 0.1);
            backdrop-filter: blur(10px);
            border: 1px solid rgba(255, 255, 255, 0.2);
            border-radius: 16px;
            padding: 24px;
            transition: all 0.3s ease;
            height: 100%;
        }

        .stat-card:hover {
            transform: translateY(-4px);
            box-shadow: 0 20px 40px rgba(0, 0, 0, 0.3);
            background: rgba(255, 255, 255, 0.15);
        }

        .stat-number {
            font-size: 2.5rem;
            font-weight: 700;
            background: linear-gradient(135deg, #8b5cf6, #ec4899);
            -webkit-background-clip: text;
            -webkit-text-fill-color: transparent;
            background-clip: text;
        }

        .stat-label {
            color: rgba(255, 255, 255, 0.8);
            font-size: 1rem;
            font-weight: 500;
            margin-top: 8px;
        }

        .stat-icon {
            width: 60px;
            height: 60px;
            border-radius: 12px;
            display: flex;
            align-items: center;
            justify-content: center;
            font-size: 1.5rem;
            color: white;
            margin-bottom: 16px;
        }

        .form-container {
            background: rgba(255, 255, 255, 0.1);
            backdrop-filter: blur(10px);
            border: 1px solid rgba(255, 255, 255, 0.2);
            border-radius: 16px;
            padding: 32px;
        }

        .form-group {
            margin-bottom: 20px;
        }

        .form-group label {
            display: block;
            margin-bottom: 8px;
            font-weight: 600;
            color: white;
        }

        .form-group input,
        .form-group select,
        .form-group textarea {
            width: 100%;
            padding: 12px;
            border: 2px solid rgba(255, 255, 255, 0.2);
            border-radius: 8px;
            font-size: 1rem;
            transition: border-color 0.3s ease;
            box-sizing: border-box;
            background: rgba(255, 255, 255, 0.1);
            color: white;
        }

        .form-group input:focus,
        .form-group select:focus,
        .form-group textarea:focus {
            outline: none;
            border-color: #8b5cf6;
            box-shadow: 0 0 0 3px rgba(139, 92, 246, 0.1);
        }

        .form-group input::placeholder,
        .form-group textarea::placeholder {
            color: rgba(255, 255, 255, 0.5);
        }

        .form-group select option {
            background: #1e293b;
            color: white;
        }

        .difficulty-badge {
            padding: 4px 12px;
            border-radius: 20px;
            font-size: 0.75rem;
            font-weight: 600;
            text-transform: uppercase;
        }

        .difficulty-badge.beginner {
            background: rgba(34, 197, 94, 0.2);
            color: #22c55e;
            border: 1px solid rgba(34, 197, 94, 0.3);
        }

        .difficulty-badge.intermediate {
            background: rgba(251, 191, 36, 0.2);
            color: #fbbf24;
            border: 1px solid rgba(251, 191, 36, 0.3);
        }

        .difficulty-badge.advanced {
            background: rgba(239, 68, 68, 0.2);
            color: #ef4444;
            border: 1px solid rgba(239, 68, 68, 0.3);
        }

        .difficulty-badge.expert {
            background: rgba(147, 51, 234, 0.2);
            color: #9333ea;
            border: 1px solid rgba(147, 51, 234, 0.3);
        }

        .category-badge {
            background: rgba(168, 85, 247, 0.2);
            color: #a855f7;
            border: 1px solid rgba(168, 85, 247, 0.3);
            padding: 4px 12px;
            border-radius: 20px;
            font-size: 0.75rem;
            font-weight: 600;
            text-transform: capitalize;
        }

        .project-item {
            background: rgba(255, 255, 255, 0.05);
            border: 1px solid rgba(255, 255, 255, 0.1);
            border-radius: 8px;
            padding: 16px;
            margin-bottom: 12px;
            transition: all 0.3s ease;
        }

        .project-item:hover {
            background: rgba(255, 255, 255, 0.1);
            transform: translateX(4px);
        }

        .project-title {
            color: white;
            font-weight: 600;
            margin-bottom: 8px;
            cursor: pointer;
        }

        .project-title:hover {
            color: #8b5cf6;
        }

        .project-meta {
            display: flex;
            gap: 8px;
            flex-wrap: wrap;
            align-items: center;
        }

        /* Notification Styles */
        .notification {
            position: fixed;
            top: 20px;
            right: 20px;
            z-index: 3000;
            max-width: 400px;
            border-radius: 10px;
            box-shadow: 0 10px 30px rgba(0, 0, 0, 0.2);
            animation: slideInRight 0.3s ease;
            padding: 15px 20px;
            display: flex;
            align-items: center;
            gap: 10px;
        }

        @keyframes slideInRight {
            from {
                opacity: 0;
                transform: translateX(100%);
            }
            to {
                opacity: 1;
                transform: translateX(0);
            }
        }

        .notification-success {
            background: linear-gradient(135deg, #10b981, #059669);
            color: white;
        }

        .notification-error {
            background: linear-gradient(135deg, #ef4444, #dc2626);
            color: white;
        }

        .notification-close {
            background: none;
            border: none;
            color: white;
            cursor: pointer;
            font-size: 1.2rem;
            opacity: 0.8;
            transition: opacity 0.3s ease;
        }

        .notification-close:hover {
            opacity: 1;
        }

        /* Mobile Menu */
        .mobile-menu {
            transform: translateX(-100%);
            transition: transform 0.3s ease-in-out;
        }

        .mobile-menu.active {
            transform: translateX(0);
        }

        .menu-overlay {
            opacity: 0;
            visibility: hidden;
            transition: all 0.3s ease-in-out;
        }

        .menu-overlay.active {
            opacity: 1;
            visibility: visible;
        }

        /* Responsive Design */
        @media (max-width: 768px) {
            .form-container {
                padding: 20px;
            }

            .stat-card {
                padding: 16px;
            }

            .stat-number {
                font-size: 2rem;
            }

            .stat-icon {
                width: 50px;
                height: 50px;
                font-size: 1.25rem;
            }
        }

        @media (max-width: 480px) {
            .stat-number {
                font-size: 1.75rem;
            }

            .form-container {
                padding: 16px;
            }
        }
    </style>
</head>
<body>
    <!-- Navigation -->
    <nav class="fixed top-0 w-full z-50 bg-black/20 backdrop-blur-md border-b border-white/10">
        <div class="container mx-auto px-6 py-4">
            <div class="flex items-center justify-between">
                <div class="flex items-center space-x-2">
                    <i class="fas fa-shield-alt text-2xl text-purple-400"></i>
                    <h1 class="text-2xl font-bold text-white">Admin Dashboard</h1>
                </div>
                <!-- Desktop Menu -->
                <div class="hidden md:flex items-center space-x-6">
                    <a href="index.html" class="text-white hover:text-purple-400 transition-colors">
                        <i class="fas fa-home mr-2"></i>Back to Home
                    </a>
                    <a href="#statistics" class="text-white hover:text-purple-400 transition-colors">Statistics</a>
                    <a href="#add-project" class="text-white hover:text-purple-400 transition-colors">Add Project</a>
                </div>
                <!-- Mobile Menu Button -->
                <button id="mobileMenuBtn" class="md:hidden text-white text-2xl">
                    <i class="fas fa-bars"></i>
                </button>
            </div>
        </div>
    </nav>

    <!-- Mobile Menu Overlay -->
    <div id="menuOverlay" class="menu-overlay fixed inset-0 bg-black/50 z-40 md:hidden"></div>

    <!-- Mobile Menu -->
    <div id="mobileMenu" class="mobile-menu fixed top-0 left-0 h-full w-80 bg-slate-800 z-50 md:hidden">
        <div class="p-6">
            <div class="flex items-center justify-between mb-8">
                <div class="flex items-center space-x-2">
                    <i class="fas fa-shield-alt text-2xl text-purple-400"></i>
                    <h2 class="text-xl font-bold text-white">Admin</h2>
                </div>
                <button id="closeMobileMenu" class="text-white text-2xl">
                    <i class="fas fa-times"></i>
                </button>
            </div>
            <nav class="space-y-4">
                <a href="index.html" class="block text-white hover:text-purple-400 transition-colors py-2 border-b border-gray-700">
                    <i class="fas fa-home mr-3"></i>Back to Home
                </a>
                <a href="#statistics" class="block text-white hover:text-purple-400 transition-colors py-2 border-b border-gray-700">
                    <i class="fas fa-chart-bar mr-3"></i>Statistics
                </a>
                <a href="#add-project" class="block text-white hover:text-purple-400 transition-colors py-2 border-b border-gray-700">
                    <i class="fas fa-plus mr-3"></i>Add Project
                </a>
            </nav>
        </div>
    </div>

    <!-- Main Content -->
    <main class="pt-20 pb-16">
        <!-- Welcome Section -->
        <section class="py-8">
            <div class="container mx-auto px-6">
                <div class="text-center animate__animated animate__fadeInUp">
                    <h1 class="text-4xl md:text-5xl font-bold text-white mb-4">
                        Welcome to 
                        <span class="text-transparent bg-clip-text bg-gradient-to-r from-purple-400 to-pink-400">
                            Admin Dashboard
                        </span>
                    </h1>
                    <p class="text-xl text-gray-300 mb-8">
                        Manage your projects and view platform statistics
                    </p>
                </div>
            </div>
        </section>

        <!-- Statistics Section -->
        <section id="statistics" class="py-12">
            <div class="container mx-auto px-6">
                <div class="text-center mb-12">
                    <h2 class="text-3xl font-bold text-white mb-4">Platform Statistics</h2>
                    <p class="text-gray-300">Overview of your project platform</p>
                </div>
                
                <div class="grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-6 mb-12">
                    <!-- Total Projects -->
                    <div class="stat-card animate__animated animate__fadeInUp">
                        <div class="stat-icon bg-gradient-to-r from-blue-500 to-blue-600">
                            <i class="fas fa-folder"></i>
                        </div>
                        <div class="stat-number" id="totalProjects">0</div>
                        <div class="stat-label">Total Projects</div>
                    </div>

                    <!-- Categories -->
                    <div class="stat-card animate__animated animate__fadeInUp" style="animation-delay: 0.1s;">
                        <div class="stat-icon bg-gradient-to-r from-green-500 to-green-600">
                            <i class="fas fa-tags"></i>
                        </div>
                        <div class="stat-number" id="totalCategories">0</div>
                        <div class="stat-label">Categories</div>
                    </div>

                    <!-- Beginner Projects -->
                    <div class="stat-card animate__animated animate__fadeInUp" style="animation-delay: 0.2s;">
                        <div class="stat-icon bg-gradient-to-r from-yellow-500 to-yellow-600">
                            <i class="fas fa-star"></i>
                        </div>
                        <div class="stat-number" id="beginnerProjects">0</div>
                        <div class="stat-label">Beginner Projects</div>
                    </div>

                    <!-- Advanced Projects -->
                    <div class="stat-card animate__animated animate__fadeInUp" style="animation-delay: 0.3s;">
                        <div class="stat-icon bg-gradient-to-r from-red-500 to-red-600">
                            <i class="fas fa-fire"></i>
                        </div>
                        <div class="stat-number" id="advancedProjects">0</div>
                        <div class="stat-label">Advanced Projects</div>
                    </div>
                </div>

                <!-- Category Breakdown -->
                <div class="grid grid-cols-1 lg:grid-cols-2 gap-8 mb-8">
                    <!-- Categories List -->
                    <div class="stat-card">
                        <h3 class="text-xl font-bold text-white mb-6 flex items-center">
                            <i class="fas fa-list mr-3 text-purple-400"></i>
                            Categories Breakdown
                        </h3>
                        <div id="categoriesList" class="space-y-3">
                            <!-- Categories will be populated here -->
                        </div>
                    </div>

                    <!-- Difficulty Breakdown -->
                    <div class="stat-card">
                        <h3 class="text-xl font-bold text-white mb-6 flex items-center">
                            <i class="fas fa-chart-pie mr-3 text-purple-400"></i>
                            Difficulty Levels
                        </h3>
                        <div id="difficultyList" class="space-y-3">
                            <!-- Difficulty breakdown will be populated here -->
                        </div>
                    </div>
                </div>

                <!-- Recent Projects -->
                <div class="stat-card">
                    <h3 class="text-xl font-bold text-white mb-6 flex items-center">
                        <i class="fas fa-clock mr-3 text-purple-400"></i>
                        Recent Projects
                        <span class="ml-auto text-sm text-gray-400" id="recentProjectsCount">0 projects</span>
                    </h3>
                    <div id="recentProjectsList" class="space-y-3 max-h-96 overflow-y-auto">
                        <!-- Recent projects will be populated here -->
                    </div>
                </div>

                <!-- Export Section -->
                <div class="text-center mt-8">
                    <button onclick="exportProjects()" class="bg-indigo-600 text-white py-3 px-6 rounded-lg font-semibold hover:bg-indigo-700 transition-all transform hover:scale-105">
                        <i class="fas fa-download mr-2"></i>Export All Projects
                    </button>
                </div>
            </div>
        </section>

        <!-- Add Project Section -->
        <section id="add-project" class="py-12">
            <div class="container mx-auto px-6">
                <div class="text-center mb-12">
                    <h2 class="text-3xl font-bold text-white mb-4">Add New Project</h2>
                    <p class="text-gray-300">Create a new project for the platform</p>
                </div>
                
                <div class="max-w-4xl mx-auto">
                    <div class="form-container animate__animated animate__fadeInUp">
                        <form id="adminAddProjectForm">
                            <div class="grid grid-cols-1 lg:grid-cols-2 gap-6">
                                <!-- Left Column -->
                                <div class="space-y-6">
                                    <div class="form-group">
                                        <label for="adminProjectTitle">Project Title *</label>
                                        <input type="text" id="adminProjectTitle" name="title" required 
                                               placeholder="Enter project title">
                                    </div>

                                    <div class="form-group">
                                        <label for="adminProjectCategory">Category *</label>
                                        <select id="adminProjectCategory" name="category" required>
                                            <option value="">Select Category</option>
                                            <option value="ai">AI & Data Science</option>
                                            <option value="education">Education</option>
                                            <option value="finance">Finance</option>
                                            <option value="health">Health & Wellness</option>
                                            <option value="business">Business</option>
                                            <option value="social">Social & Community</option>
                                            <option value="creative">Creative & Design</option>
                                            <option value="environment">Environment</option>
                                        </select>
                                    </div>

                                    <div class="form-group">
                                        <label for="adminProjectDifficulty">Difficulty Level *</label>
                                        <select id="adminProjectDifficulty" name="difficulty" required>
                                            <option value="">Select Difficulty</option>
                                            <option value="Beginner">Beginner</option>
                                            <option value="Intermediate">Intermediate</option>
                                            <option value="Advanced">Advanced</option>
                                            <option value="Expert">Expert</option>
                                        </select>
                                    </div>

                                    <div class="form-group">
                                        <label for="adminProjectTech">Technologies *</label>
                                        <input type="text" id="adminProjectTech" name="tech" required
                                               placeholder="React, Node.js, MongoDB">
                                        <small class="text-gray-400 text-sm">Separate multiple technologies with commas</small>
                                    </div>

                                    <div class="form-group">
                                        <label for="adminProjectDuration">Estimated Duration</label>
                                        <input type="text" id="adminProjectDuration" name="duration" 
                                               placeholder="2-3 weeks">
                                    </div>
                                </div>

                                <!-- Right Column -->
                                <div class="space-y-6">
                                    <div class="form-group">
                                        <label for="adminProjectDescription">Short Description *</label>
                                        <textarea id="adminProjectDescription" name="description" rows="3" required
                                                  placeholder="Brief description of the project"></textarea>
                                        <div id="adminCharCount" class="text-sm text-gray-400 mt-1">0 characters</div>
                                    </div>

                                    <div class="form-group">
                                        <label for="adminProjectFullDescription">Full Description</label>
                                        <textarea id="adminProjectFullDescription" name="fullDescription" rows="6"
                                                  placeholder="Detailed description with implementation details, features, etc."></textarea>
                                        <small class="text-gray-400 text-sm">This will be shown in the project modal</small>
                                    </div>

                                    <div class="form-group">
                                        <label for="adminProjectImage">Image URL</label>
                                        <input type="url" id="adminProjectImage" name="image" 
                                               placeholder="https://example.com/image.jpg">
                                    </div>

                                    <div class="form-group">
                                        <label for="adminProjectGithub">GitHub Repository</label>
                                        <input type="url" id="adminProjectGithub" name="github" 
                                               placeholder="https://github.com/username/repo">
                                    </div>

                                    <div class="form-group">
                                        <label for="adminProjectDemo">Live Demo URL</label>
                                        <input type="url" id="adminProjectDemo" name="demo" 
                                               placeholder="https://demo.example.com">
                                    </div>
                                </div>
                            </div>

                            <!-- Form Actions -->
                            <div class="flex flex-col sm:flex-row gap-4 mt-8 pt-6 border-t border-white/20">
                                <button type="submit" class="flex-1 bg-gradient-to-r from-purple-500 to-pink-500 text-white py-3 px-6 rounded-lg font-semibold hover:from-purple-600 hover:to-pink-600 transition-all transform hover:scale-105">
                                    <i class="fas fa-plus mr-2"></i>Add Project
                                </button>
                                <button type="button" id="resetForm" class="flex-1 bg-gray-600 text-white py-3 px-6 rounded-lg font-semibold hover:bg-gray-700 transition-all">
                                    <i class="fas fa-undo mr-2"></i>Reset Form
                                </button>
                                <button type="button" id="previewProject" class="flex-1 bg-blue-600 text-white py-3 px-6 rounded-lg font-semibold hover:bg-blue-700 transition-all">
                                    <i class="fas fa-eye mr-2"></i>Preview
                                </button>
                            </div>
                        </form>
                    </div>
                </div>
            </div>
        </section>
    </main>

    <!-- Footer -->
    <footer class="bg-black/40 py-8">
        <div class="container mx-auto px-6 text-center">
            <div class="flex items-center justify-center space-x-2 mb-4">
                <i class="fas fa-shield-alt text-2xl text-purple-400"></i>
                <h3 class="text-2xl font-bold text-white">ProjectHub Admin</h3>
            </div>
            <p class="text-gray-400">Managing the future of innovation</p>
        </div>
    </footer>

    <script>
        // Global variables
        let allProjects = [];
        
        // Load projects from script.js and localStorage
        function loadAllProjects() {
            // First, load projects from script.js (if available)
            if (typeof projects !== 'undefined' && Array.isArray(projects)) {
                allProjects = [...projects];
                console.log(`Loaded ${projects.length} projects from script.js`);
            } else {
                console.warn('Projects from script.js not found, using fallback data');
                allProjects = [];
            }
            
            // Then, load user projects from localStorage
            const userProjects = JSON.parse(localStorage.getItem('userProjects') || '[]');
            const adminProjects = JSON.parse(localStorage.getItem('adminProjects') || '[]');
            
            // Merge all projects, avoiding duplicates
            [...userProjects, ...adminProjects].forEach(project => {
                if (!allProjects.find(p => p.id === project.id)) {
                    allProjects.push(project);
                }
            });
            
            console.log(`Total projects loaded: ${allProjects.length}`);
        }

        // Calculate and display statistics
        function updateStatistics() {
            const stats = {
                total: allProjects.length,
                categories: {},
                difficulties: {
                    'Beginner': 0,
                    'Intermediate': 0,
                    'Advanced': 0,
                    'Expert': 0
                },
                technologies: {},
                recent: []
            };

            // Calculate statistics
            allProjects.forEach(project => {
                // Count categories
                const category = project.category || 'uncategorized';
                stats.categories[category] = (stats.categories[category] || 0) + 1;
                
                // Count difficulties
                const difficulty = project.difficulty || 'Beginner';
                stats.difficulties[difficulty] = (stats.difficulties[difficulty] || 0) + 1;
                
                // Count technologies
                if (project.tech) {
                    const techs = project.tech.split(',').map(t => t.trim().toLowerCase());
                    techs.forEach(tech => {
                        if (tech) {
                            stats.technologies[tech] = (stats.technologies[tech] || 0) + 1;
                        }
                    });
                }
                
                // Add to recent if it has dateAdded
                if (project.dateAdded) {
                    stats.recent.push({
                        ...project,
                        dateAdded: new Date(project.dateAdded)
                    });
                }
            });

            // Sort recent projects by date
            stats.recent.sort((a, b) => b.dateAdded - a.dateAdded);
            stats.recent = stats.recent.slice(0, 10); // Keep only 10 most recent

            // Update DOM elements
            document.getElementById('totalProjects').textContent = stats.total;
            document.getElementById('totalCategories').textContent = Object.keys(stats.categories).length;
            document.getElementById('beginnerProjects').textContent = stats.difficulties['Beginner'];
            document.getElementById('advancedProjects').textContent = stats.difficulties['Advanced'] + stats.difficulties['Expert'];

            // Update categories list
            const categoriesList = document.getElementById('categoriesList');
            if (Object.keys(stats.categories).length > 0) {
                categoriesList.innerHTML = Object.entries(stats.categories)
                    .sort(([,a], [,b]) => b - a)
                    .map(([category, count]) => `
                        <div class="flex items-center justify-between py-2 border-b border-white/10">
                            <span class="category-badge">${getCategoryDisplayName(category)}</span>
                            <span class="text-white font-semibold">${count}</span>
                        </div>
                    `).join('');
            } else {
                categoriesList.innerHTML = '<p class="text-gray-400">No categories found</p>';
            }

            // Update difficulty list
            const difficultyList = document.getElementById('difficultyList');
            const difficultyEntries = Object.entries(stats.difficulties).filter(([,count]) => count > 0);
            if (difficultyEntries.length > 0) {
                difficultyList.innerHTML = difficultyEntries
                    .map(([difficulty, count]) => `
                        <div class="flex items-center justify-between py-2 border-b border-white/10">
                            <span class="difficulty-badge ${difficulty.toLowerCase()}">${difficulty}</span>
                            <span class="text-white font-semibold">${count}</span>
                        </div>
                    `).join('');
            } else {
                difficultyList.innerHTML = '<p class="text-gray-400">No difficulty levels found</p>';
            }

            // Update recent projects list
            const recentProjectsList = document.getElementById('recentProjectsList');
            const recentProjectsCount = document.getElementById('recentProjectsCount');
            
            recentProjectsCount.textContent = `${stats.recent.length} projects`;
            
            if (stats.recent.length > 0) {
                recentProjectsList.innerHTML = stats.recent.map(project => `
                    <div class="project-item">
                        <div class="project-title" onclick="showProjectDetails(${project.id})">
                            ${project.title}
                        </div>
                        <div class="project-meta">
                            <span class="category-badge">${getCategoryDisplayName(project.category)}</span>
                            <span class="difficulty-badge ${project.difficulty.toLowerCase()}">${project.difficulty}</span>
                            <span class="text-gray-400 text-sm">
                                <i class="fas fa-calendar mr-1"></i>
                                ${formatDate(project.dateAdded)}
                            </span>
                        </div>
                        <p class="text-gray-300 text-sm mt-2">${project.description}</p>
                    </div>
                `).join('');
            } else {
                recentProjectsList.innerHTML = '<p class="text-gray-400">No recent projects found</p>';
            }

            // Log statistics for debugging
            console.log('Statistics updated:', stats);
        }

        // Get display name for category
        function getCategoryDisplayName(category) {
            const categoryNames = {
                'ai': 'AI & Data Science',
                'education': 'Education',
                'finance': 'Finance',
                'health': 'Health & Wellness',
                'business': 'Business',
                'social': 'Social & Community',
                'creative': 'Creative & Design',
                'environment': 'Environment',
                'uncategorized': 'Uncategorized'
            };
            return categoryNames[category] || category.charAt(0).toUpperCase() + category.slice(1);
        }

        // Format date helper
        function formatDate(date) {
            if (!date) return 'Unknown';
            const d = new Date(date);
            return d.toLocaleDateString('en-US', {
                year: 'numeric',
                month: 'short',
                day: 'numeric'
            });
        }

        // Show project details
        function showProjectDetails(projectId) {
            const project = allProjects.find(p => p.id === projectId);
            if (!project) return;

            const detailsHTML = `
                <div class="bg-black/50 fixed inset-0 z-50 flex items-center justify-center p-4">
                    <div class="bg-slate-800 rounded-lg p-6 max-w-2xl w-full max-h-96 overflow-y-auto">
                        <div class="flex justify-between items-center mb-4">
                            <h3 class="text-2xl font-bold text-white">${project.title}</h3>
                            <button onclick="closeProjectDetails()" class="text-white hover:text-red-400">
                                <i class="fas fa-times text-xl"></i>
                            </button>
                        </div>
                        <div class="space-y-4">
                            <div class="flex flex-wrap gap-2">
                                <span class="category-badge">${getCategoryDisplayName(project.category)}</span>
                                <span class="difficulty-badge ${project.difficulty.toLowerCase()}">${project.difficulty}</span>
                            </div>
                            <p class="text-gray-300">${project.description}</p>
                            ${project.fullDescription ? `<p class="text-gray-300">${project.fullDescription}</p>` : ''}
                            <div class="grid grid-cols-1 md:grid-cols-2 gap-4 text-sm">
                                <div>
                                    <strong class="text-white">Technologies:</strong>
                                    <p class="text-gray-300">${project.tech}</p>
                                </div>
                                <div>
                                    <strong class="text-white">Duration:</strong>
                                    <p class="text-gray-300">${project.duration || 'Not specified'}</p>
                                </div>
                                ${project.dateAdded ? `
                                <div>
                                    <strong class="text-white">Added:</strong>
                                    <p class="text-gray-300">${formatDate(project.dateAdded)}</p>
                                </div>
                                ` : ''}
                                ${project.addedBy ? `
                                <div>
                                    <strong class="text-white">Added by:</strong>
                                    <p class="text-gray-300">${project.addedBy}</p>
                                </div>
                                ` : ''}
                            </div>
                            ${project.github || project.demo ? `
                            <div class="flex gap-2 pt-4 border-t border-gray-600">
                                ${project.github ? `<a href="${project.github}" target="_blank" class="bg-gray-700 text-white px-4 py-2 rounded-lg hover:bg-gray-600 transition-all"><i class="fab fa-github mr-2"></i>GitHub</a>` : ''}
                                ${project.demo ? `<a href="${project.demo}" target="_blank" class="bg-blue-600 text-white px-4 py-2 rounded-lg hover:bg-blue-700 transition-all"><i class="fas fa-external-link-alt mr-2"></i>Demo</a>` : ''}
                            </div>
                            ` : ''}
                        </div>
                    </div>
                </div>
            `;
            
            document.body.insertAdjacentHTML('beforeend', detailsHTML);
        }

        // Close project details
        function closeProjectDetails() {
            const details = document.querySelector('.bg-black\\/50');
            if (details) {
                details.remove();
            }
        }

        // Mobile menu functionality
        const mobileMenuBtn = document.getElementById('mobileMenuBtn');
        const mobileMenu = document.getElementById('mobileMenu');
        const menuOverlay = document.getElementById('menuOverlay');
        const closeMobileMenu = document.getElementById('closeMobileMenu');

        function openMobileMenu() {
            mobileMenu.classList.add('active');
            menuOverlay.classList.add('active');
            document.body.style.overflow = 'hidden';
        }

        function closeMobileMenuFunc() {
            mobileMenu.classList.remove('active');
            menuOverlay.classList.remove('active');
            document.body.style.overflow = 'auto';
        }

        mobileMenuBtn.addEventListener('click', openMobileMenu);
        closeMobileMenu.addEventListener('click', closeMobileMenuFunc);
        menuOverlay.addEventListener('click', closeMobileMenuFunc);

        // Close mobile menu when clicking on nav links
        document.querySelectorAll('#mobileMenu a[href^="#"]').forEach(link => {
            link.addEventListener('click', closeMobileMenuFunc);
        });

        // Form handling
        document.getElementById('adminAddProjectForm').addEventListener('submit', function(e) {
            e.preventDefault();
            
            if (!validateAdminProjectForm()) {
                return;
            }

            const formData = new FormData(this);
            const projectData = {
                id: Date.now(),
                title: formData.get('title'),
                description: formData.get('description'),
                fullDescription: formData.get('fullDescription') || formData.get('description'),
                category: formData.get('category'),
                difficulty: formData.get('difficulty'),
                tech: formData.get('tech'),
                duration: formData.get('duration') || 'Not specified',
                image: formData.get('image') || 'https://via.placeholder.com/300x200?text=Project+Image',
                github: formData.get('github') || '',
                demo: formData.get('demo') || '',
                featured: true,
                tags: formData.get('tech') ? formData.get('tech').split(',').map(tag => tag.trim()) : [],
                dateAdded: new Date().toISOString(),
                status: 'active',
                addedBy: 'admin'
            };

            // Add to projects array
            allProjects.push(projectData);

            // Save to localStorage
            let adminProjects = JSON.parse(localStorage.getItem('adminProjects') || '[]');
            adminProjects.push(projectData);
            localStorage.setItem('adminProjects', JSON.stringify(adminProjects));

            // Also save to userProjects for compatibility with main site
            let userProjects = JSON.parse(localStorage.getItem('userProjects') || '[]');
            userProjects.push(projectData);
            localStorage.setItem('userProjects', JSON.stringify(userProjects));

            // Update the main projects array if it exists
            if (typeof projects !== 'undefined' && Array.isArray(projects)) {
                projects.push(projectData);
            }

            // Show success notification
            showNotification('Project added successfully!', 'success');

            // Reset form
            this.reset();
            document.getElementById('adminCharCount').textContent = '0 characters';

            // Update statistics
            updateStatistics();
        });

        // Form validation
        function validateAdminProjectForm() {
            const title = document.getElementById('adminProjectTitle').value.trim();
            const description = document.getElementById('adminProjectDescription').value.trim();
            const category = document.getElementById('adminProjectCategory').value;
            const difficulty = document.getElementById('adminProjectDifficulty').value;
            const tech = document.getElementById('adminProjectTech').value.trim();

            if (!title) {
                showNotification('Project title is required', 'error');
                return false;
            }

            if (title.length < 5) {
                showNotification('Project title must be at least 5 characters long', 'error');
                return false;
            }

            // Check for duplicate titles
            if (allProjects.some(p => p.title.toLowerCase() === title.toLowerCase())) {
                showNotification('A project with this title already exists', 'error');
                return false;
            }

            if (!description) {
                showNotification('Project description is required', 'error');
                return false;
            }

            if (description.length < 20) {
                showNotification('Project description must be at least 20 characters long', 'error');
                return false;
            }

            if (!category) {
                showNotification('Please select a category', 'error');
                return false;
            }

            if (!difficulty) {
                showNotification('Please select a difficulty level', 'error');
                return false;
            }

            if (!tech) {
                showNotification('Technologies field is required', 'error');
                return false;
            }

            return true;
        }

        // Character counter for description
        document.getElementById('adminProjectDescription').addEventListener('input', function() {
            const charCount = this.value.length;
            const charCountElement = document.getElementById('adminCharCount');
            charCountElement.textContent = `${charCount} characters`;
            
            if (charCount < 20) {
                charCountElement.style.color = '#ef4444';
            } else if (charCount < 100) {
                charCountElement.style.color = '#f59e0b';
            } else {
                charCountElement.style.color = '#10b981';
            }
        });

        // Reset form button
        document.getElementById('resetForm').addEventListener('click', function() {
            if (confirm('Are you sure you want to reset the form? All data will be lost.')) {
                document.getElementById('adminAddProjectForm').reset();
                document.getElementById('adminCharCount').textContent = '0 characters';
                showNotification('Form reset successfully', 'success');
                localStorage.removeItem('adminFormDraft');
            }
        });

        // Preview project button
        document.getElementById('previewProject').addEventListener('click', function() {
            const form = document.getElementById('adminAddProjectForm');
            const formData = new FormData(form);
            
            const previewData = {
                title: formData.get('title') || 'Project Title',
                description: formData.get('description') || 'Project description',
                fullDescription: formData.get('fullDescription') || '',
                category: formData.get('category') || 'uncategorized',
                difficulty: formData.get('difficulty') || 'Beginner',
                tech: formData.get('tech') || 'Not specified',
                duration: formData.get('duration') || 'Not specified',
                github: formData.get('github') || '',
                demo: formData.get('demo') || ''
            };

            showProjectPreview(previewData);
        });

        // Show project preview
        function showProjectPreview(projectData) {
            const previewHTML = `
                <div class="bg-black/50 fixed inset-0 z-50 flex items-center justify-center p-4">
                    <div class="bg-slate-800 rounded-lg p-6 max-w-2xl w-full max-h-96 overflow-y-auto">
                        <div class="flex justify-between items-center mb-4">
                            <h3 class="text-2xl font-bold text-white">Project Preview</h3>
                            <button onclick="closePreview()" class="text-white hover:text-red-400">
                                <i class="fas fa-times text-xl"></i>
                            </button>
                        </div>
                        <div class="project-card" style="cursor: default; transform: none;">
                            <div class="project-meta">
                                <span class="category-badge">${getCategoryDisplayName(projectData.category)}</span>
                                <span class="difficulty-badge ${projectData.difficulty.toLowerCase()}">${projectData.difficulty}</span>
                            </div>
                            <h3 style="color: white; font-size: 1.5rem; font-weight: 700; margin-bottom: 12px;">${projectData.title}</h3>
                            <p style="color: rgba(255, 255, 255, 0.8); margin-bottom: 16px;">${projectData.description}</p>
                            ${projectData.fullDescription ? `<p style="color: rgba(255, 255, 255, 0.7); margin-bottom: 16px; font-size: 0.9rem;"><strong>Full Description:</strong> ${projectData.fullDescription}</p>` : ''}
                            <div class="project-tech">
                                <i class="fas fa-code mr-2"></i>
                                <strong>Tech:</strong> ${projectData.tech}
                            </div>
                            <div class="project-tech mt-2">
                                <i class="fas fa-clock mr-2"></i>
                                <strong>Duration:</strong> ${projectData.duration}
                            </div>
                            ${projectData.github || projectData.demo ? `
                            <div class="flex gap-2 mt-4">
                                ${projectData.github ? `<span class="text-sm text-gray-400"><i class="fab fa-github mr-1"></i>GitHub: ${projectData.github}</span>` : ''}
                                ${projectData.demo ? `<span class="text-sm text-gray-400"><i class="fas fa-external-link-alt mr-1"></i>Demo: ${projectData.demo}</span>` : ''}
                            </div>
                            ` : ''}
                        </div>
                    </div>
                </div>
            `;
            
            document.body.insertAdjacentHTML('beforeend', previewHTML);
        }

        // Close preview
        function closePreview() {
            const preview = document.querySelector('.bg-black\\/50');
            if (preview) {
                preview.remove();
            }
        }

        // Export projects functionality
        function exportProjects() {
            const exportData = {
                exportDate: new Date().toISOString(),
                totalProjects: allProjects.length,
                projects: allProjects.map(project => ({
                    ...project,
                    exportNote: 'Exported from ProjectHub Admin Dashboard'
                }))
            };

            const dataStr = JSON.stringify(exportData, null, 2);
            const dataBlob = new Blob([dataStr], {type: 'application/json'});
            const url = URL.createObjectURL(dataBlob);
            const link = document.createElement('a');
            link.href = url;
            link.download = `projecthub-export-${new Date().toISOString().split('T')[0]}.json`;
            document.body.appendChild(link);
            link.click();
            document.body.removeChild(link);
            URL.revokeObjectURL(url);
            showNotification('Projects exported successfully', 'success');
        }

        // Notification system
        function showNotification(message, type = 'info') {
            // Remove existing notifications
            const existingNotifications = document.querySelectorAll('.notification');
            existingNotifications.forEach(notification => notification.remove());

            const notification = document.createElement('div');
            notification.className = `notification notification-${type}`;
            notification.innerHTML = `
                <i class="fas ${getNotificationIcon(type)}"></i>
                <span>${message}</span>
                <button class="notification-close" onclick="this.parentElement.remove()">
                    <i class="fas fa-times"></i>
                </button>
            `;

            document.body.appendChild(notification);

            // Auto remove after 5 seconds
            setTimeout(() => {
                if (notification.parentElement) {
                    notification.remove();
                }
            }, 5000);
        }

        function getNotificationIcon(type) {
            switch (type) {
                case 'success': return 'fa-check-circle';
                case 'error': return 'fa-exclamation-circle';
                case 'warning': return 'fa-exclamation-triangle';
                default: return 'fa-info-circle';
            }
        }

        // Auto-save form data
        function autoSaveForm() {
            const form = document.getElementById('adminAddProjectForm');
            const formData = new FormData(form);
            const saveData = {};
            
            for (let [key, value] of formData.entries()) {
                if (value.trim()) { // Only save non-empty values
                    saveData[key] = value;
                }
            }
            
            if (Object.keys(saveData).length > 0) {
                localStorage.setItem('adminFormDraft', JSON.stringify(saveData));
            }
        }

        // Load saved form data
        function loadSavedForm() {
            const savedData = localStorage.getItem('adminFormDraft');
            if (savedData) {
                try {
                    const data = JSON.parse(savedData);
                    const form = document.getElementById('adminAddProjectForm');
                    
                    Object.entries(data).forEach(([key, value]) => {
                        const input = form.querySelector(`[name="${key}"]`);
                        if (input && value) {
                            input.value = value;
                            
                            // Update character count if it's the description field
                            if (key === 'description') {
                                const charCountElement = document.getElementById('adminCharCount');
                                charCountElement.textContent = `${value.length} characters`;
                                
                                if (value.length < 20) {
                                    charCountElement.style.color = '#ef4444';
                                } else if (value.length < 100) {
                                    charCountElement.style.color = '#f59e0b';
                                } else {
                                    charCountElement.style.color = '#10b981';
                                }
                            }
                        }
                    });
                    
                    showNotification('Draft loaded successfully', 'success');
                } catch (error) {
                    console.error('Error loading saved form:', error);
                    localStorage.removeItem('adminFormDraft');
                }
            }
        }

        // Auto-save on input change
        document.getElementById('adminAddProjectForm').addEventListener('input', function() {
            clearTimeout(window.autoSaveTimeout);
            window.autoSaveTimeout = setTimeout(autoSaveForm, 2000); // Save after 2 seconds of inactivity
        });

        // Clear saved form data on successful submission
        document.getElementById('adminAddProjectForm').addEventListener('submit', function() {
            localStorage.removeItem('adminFormDraft');
        });

        // Form field enhancements
        function enhanceFormFields() {
            // Add real-time validation
            const requiredFields = document.querySelectorAll('#adminAddProjectForm [required]');
            requiredFields.forEach(field => {
                field.addEventListener('blur', function() {
                    if (!this.value.trim()) {
                        this.style.borderColor = '#ef4444';
                        this.style.boxShadow = '0 0 0 3px rgba(239, 68, 68, 0.1)';
                    } else {
                        this.style.borderColor = '#10b981';
                        this.style.boxShadow = '0 0 0 3px rgba(16, 185, 129, 0.1)';
                    }
                });

                field.addEventListener('input', function() {
                    if (this.value.trim()) {
                        this.style.borderColor = '#10b981';
                        this.style.boxShadow = '0 0 0 3px rgba(16, 185, 129, 0.1)';
                    } else {
                        this.style.borderColor = 'rgba(255, 255, 255, 0.2)';
                        this.style.boxShadow = 'none';
                    }
                });
            });

            // URL validation for image, github, and demo fields
            const urlFields = ['adminProjectImage', 'adminProjectGithub', 'adminProjectDemo'];
            urlFields.forEach(fieldId => {
                const field = document.getElementById(fieldId);
                if (field) {
                    field.addEventListener('blur', function() {
                        if (this.value && !isValidURL(this.value)) {
                            this.style.borderColor = '#ef4444';
                            this.style.boxShadow = '0 0 0 3px rgba(239, 68, 68, 0.1)';
                            showNotification('Please enter a valid URL', 'error');
                        } else if (this.value) {
                            this.style.borderColor = '#10b981';
                            this.style.boxShadow = '0 0 0 3px rgba(16, 185, 129, 0.1)';
                        }
                    });
                }
            });

            // Tech field enhancement - suggest common technologies
            const techField = document.getElementById('adminProjectTech');
            if (techField) {
                techField.addEventListener('input', function() {
                    // You could add autocomplete suggestions here
                    const value = this.value.toLowerCase();
                    if (value.includes('react') || value.includes('vue') || value.includes('angular')) {
                        // Frontend framework detected
                    }
                });
            }
        }

        // URL validation helper
        function isValidURL(string) {
            try {
                new URL(string);
                return true;
            } catch (_) {
                return false;
            }
        }

        // Smooth scrolling for navigation links
        document.querySelectorAll('a[href^="#"]').forEach(anchor => {
            anchor.addEventListener('click', function (e) {
                e.preventDefault();
                const target = document.querySelector(this.getAttribute('href'));
                if (target) {
                    target.scrollIntoView({
                        behavior: 'smooth',
                        block: 'start'
                    });
                }
            });
        });

        // Keyboard shortcuts
        document.addEventListener('keydown', function(e) {
            // Ctrl/Cmd + S to save form as draft
            if ((e.ctrlKey || e.metaKey) && e.key === 's') {
                e.preventDefault();
                autoSaveForm();
                showNotification('Form saved as draft', 'success');
            }
            
            // Ctrl/Cmd + R to reset form
            if ((e.ctrlKey || e.metaKey) && e.key === 'r') {
                e.preventDefault();
                document.getElementById('resetForm').click();
            }
            
            // Escape to close modals/previews
            if (e.key === 'Escape') {
                closePreview();
                closeProjectDetails();
                closeMobileMenuFunc();
            }

            // Ctrl/Cmd + E to export
            if ((e.ctrlKey || e.metaKey) && e.key === 'e') {
                e.preventDefault();
                exportProjects();
            }

            // Ctrl/Cmd + L to load draft
            if ((e.ctrlKey || e.metaKey) && e.key === 'l') {
                e.preventDefault();
                loadSavedForm();
            }
        });

        // Performance monitoring
        function trackPerformance() {
            // Track page load time
            window.addEventListener('load', function() {
                const loadTime = performance.now();
                console.log(`Admin Dashboard loaded in ${loadTime.toFixed(2)}ms`);
            });

            // Track statistics update time
            const startTime = performance.now();
            updateStatistics();
            const endTime = performance.now();
            console.log(`Statistics updated in ${(endTime - startTime).toFixed(2)}ms`);
        }

        // Error handling
        window.addEventListener('error', function(e) {
            console.error('JavaScript Error:', e.error);
            showNotification('An error occurred. Please refresh the page.', 'error');
        });

        // Backup and restore functionality
        function createBackup() {
            const backupData = {
                timestamp: new Date().toISOString(),
                projects: allProjects,
                userProjects: JSON.parse(localStorage.getItem('userProjects') || '[]'),
                adminProjects: JSON.parse(localStorage.getItem('adminProjects') || '[]'),
                settings: {
                    version: '1.0.0',
                    platform: 'ProjectHub'
                }
            };

            const dataStr = JSON.stringify(backupData, null, 2);
            const dataBlob = new Blob([dataStr], {type: 'application/json'});
            const url = URL.createObjectURL(dataBlob);
            const link = document.createElement('a');
            link.href = url;
            link.download = `projecthub-backup-${new Date().toISOString().split('T')[0]}.json`;
            document.body.appendChild(link);
            link.click();
            document.body.removeChild(link);
            URL.revokeObjectURL(url);
            showNotification('Backup created successfully', 'success');
        }

        // Add backup button to the page
        function addBackupButton() {
            const exportSection = document.querySelector('#statistics .text-center');
            if (exportSection) {
                const backupBtn = document.createElement('button');
                backupBtn.innerHTML = '<i class="fas fa-shield-alt mr-2"></i>Create Backup';
                backupBtn.className = 'bg-green-600 text-white py-3 px-6 rounded-lg font-semibold hover:bg-green-700 transition-all transform hover:scale-105 ml-4';
                backupBtn.onclick = createBackup;
                exportSection.appendChild(backupBtn);
            }
        }

        // Initialize everything when DOM is loaded
        document.addEventListener('DOMContentLoaded', function() {
            console.log('Admin Dashboard initializing...');
            
            // Load all projects first
            loadAllProjects();
            
            // Update statistics
            updateStatistics();
            
            // Load saved form data if available
            setTimeout(() => {
                const hasDraft = localStorage.getItem('adminFormDraft');
                if (hasDraft) {
                    if (confirm('You have a saved draft. Would you like to load it?')) {
                        loadSavedForm();
                    }
                }
            }, 1000);
            
            // Enhance form fields
            enhanceFormFields();
            
            // Add backup functionality
            addBackupButton();
            
            // Track performance
            trackPerformance();
            
            // Show welcome message
            setTimeout(() => {
                showNotification('Welcome to Admin Dashboard! Use Ctrl+S to save drafts, Ctrl+E to export.', 'success');
            }, 1500);

            console.log('Admin Dashboard initialized successfully');
        });

        // Refresh statistics every 30 seconds
        setInterval(() => {
            loadAllProjects();
            updateStatistics();
        }, 30000);

        // Make functions globally available
        window.closePreview = closePreview;
        window.closeProjectDetails = closeProjectDetails;
        window.showProjectDetails = showProjectDetails;
        window.exportProjects = exportProjects;
        window.createBackup = createBackup;
        window.loadSavedForm = loadSavedForm;
        window.autoSaveForm = autoSaveForm;

        // Add some helpful console commands for debugging
        window.adminDebug = {
            showAllProjects: () => console.table(allProjects),
            clearDraft: () => {
                localStorage.removeItem('adminFormDraft');
                console.log('Draft cleared');
            },
            clearAllData: () => {
                if (confirm('This will clear ALL project data. Are you sure?')) {
                    localStorage.removeItem('userProjects');
                    localStorage.removeItem('adminProjects');
                    localStorage.removeItem('adminFormDraft');
                    location.reload();
                }
            },
            getStats: () => {
                const stats = {
                    total: allProjects.length,
                    byCategory: {},
                    byDifficulty: {}
                };
                allProjects.forEach(p => {
                    stats.byCategory[p.category] = (stats.byCategory[p.category] || 0) + 1;
                    stats.byDifficulty[p.difficulty] = (stats.byDifficulty[p.difficulty] || 0) + 1;
                });
                return stats;
            }
        };

        console.log('Admin Debug tools available: window.adminDebug');
    </script>
</body>
</html>

